<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Panel Admin | Consultoría</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

<!-- PROTECCIÓN -->
<script>
  if (localStorage.getItem("adminAuth") !== "true") {
    window.location.href = "login.html";
  }
</script>

<nav class="navbar compact">
  <a class="brand" href="index.html">
    <img src="assets/logo.png" class="brand-logo">
    <span class="brand-name">Consultoría</span>
  </a>

  <!-- BOTÓN CERRAR SESIÓN -->
  <button id="logoutBtn" class="btn danger small">
    Cerrar sesión
  </button>
</nav>

<main class="page">
  <div class="container">

    <header class="page-head">
      <h1>Panel Admin</h1>
      <p>Gestión de mensajes</p>
    </header>

    <section class="admin-card">
      <h3>Mensajes recibidos</h3>
      <table class="table">
        <thead>
          <tr>
            <th>Fecha</th>
            <th>Nombre</th>
            <th>Correo</th>
            <th>Asunto</th>
            <th>Status</th>
            <th></th>
          </tr>
        </thead>
        <tbody id="messagesTable"></tbody>
      </table>
    </section>

    <section class="admin-card" style="margin-top:16px;">
      <h3>Responder</h3>

      <form id="replyForm" class="form">
        <input type="hidden" name="id_message">

        <div class="grid-2">
          <input name="asunto" required>
          <select name="status">
            <option value="en_proceso">En proceso</option>
            <option value="respondido">Respondido</option>
            <option value="cerrado">Cerrado</option>
          </select>
        </div>

        <textarea name="respuesta" rows="6" required></textarea>
        <button class="btn primary">Enviar respuesta</button>
      </form>
    </section>

  </div>
</main>

<script src="admin.js"></script>
</body>
</html>
